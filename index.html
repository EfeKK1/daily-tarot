<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Daily Tarot</title>

  <!-- Google Font: Mystery Quest -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Mystery+Quest&display=swap"
    rel="stylesheet"
  >

  <style>
    /* RESET */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: "Mystery Quest", cursive;
      background: url("https://images.unsplash.com/photo-1615315685401-1396dcc53f61?ixlib=rb-4.0.3&auto=format&fit=crop&w=1950&q=80") 
        no-repeat center center fixed;
      background-size: cover;
      color: #fff;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
      overflow-x: hidden;
    }
    /* Dark overlay for readability */
    body::before {
      content: "";
      position: fixed;
      top: 0; 
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      pointer-events: none;
      z-index: 0;
    }

    .container {
      max-width: 900px;
      width: 95%;
      margin: 40px auto;
      background-color: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(4px);
      border-radius: 12px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.7);
      padding: 30px 20px;
      text-align: center;
      position: relative;
      z-index: 1;
      animation: fadeIn 1s ease forwards;
    }
    @keyframes fadeIn {
      0% {
        opacity: 0;
        transform: scale(0.9);
      }
      100% {
        opacity: 1;
        transform: scale(1);
      }
    }

    h1 {
      font-size: 2.2em;
      margin-bottom: 10px;
      text-shadow: 2px 2px 4px #000;
    }
    p.subtitle {
      margin-bottom: 20px;
      font-size: 1.1em;
      text-shadow: 1px 1px 2px #000;
      color: #ddd;
    }

    /* Language Toggle */
    .lang-toggle {
      position: absolute;
      top: 15px;
      right: 15px;
      background-color: #dab03f;
      color: #300066;
      border: none;
      padding: 10px 18px;
      font-size: 1em;
      font-weight: bold;
      border-radius: 20px;
      cursor: pointer;
      transition: transform 0.3s ease, background-color 0.3s ease;
      font-family: inherit;
      z-index: 2; 
    }
    .lang-toggle:hover {
      background-color: #bf9a34;
      transform: scale(1.05);
    }

    /* Streak & Button */
    #streakContainer {
      font-size: 1.2em;
      margin-bottom: 15px;
      text-shadow: 1px 1px 2px #000;
    }
    button.action-btn {
      background-color: #d8af3f;
      color: #300066;
      border: none;
      padding: 15px 30px;
      font-size: 1.2em;
      font-weight: bold;
      border-radius: 30px;
      margin: 10px 0;
      cursor: pointer;
      transition: transform 0.3s ease, background-color 0.3s ease;
      font-family: inherit;
    }
    button.action-btn:hover {
      background-color: #bf9a34;
      transform: scale(1.05);
    }

    #message {
      margin-top: 8px;
      font-size: 1.05em;
      color: #ffdddd;
      min-height: 24px; 
      text-shadow: 1px 1px 2px #000;
    }

    /* 3 Cards Layout */
    .three-cards {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 20px;
      margin-top: 25px;
    }
    .card-container {
      flex: 1 1 28%;
      background-color: rgba(255,255,255,0.1);
      border-radius: 10px;
      padding: 20px;
      text-align: center;
      min-width: 180px;
      box-shadow: 0 0 10px rgba(255,255,255,0.2);
      animation: flipIn 0.8s ease forwards;
      transition: box-shadow 0.3s ease, transform 0.3s ease;
      transform-style: preserve-3d;
    }
    .card-container:hover {
      box-shadow: 0 0 15px rgba(255,255,255,0.4);
      transform: scale(1.03);
    }
    @keyframes flipIn {
      0% {
        transform: rotateY(90deg) scale(0.9);
        opacity: 0;
      }
      100% {
        transform: rotateY(0) scale(1);
        opacity: 1;
      }
    }
    .position-label {
      color: #fff;
      margin-bottom: 8px;
      font-size: 1.1em;
      text-transform: uppercase;
      letter-spacing: 1px;
      text-shadow: 1px 1px 2px #000;
    }
    .card-container img {
      max-width: 160px;
      margin-bottom: 10px;
      border-radius: 6px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.6);
      transition: transform 0.5s;
    }
    .card-title {
      font-size: 1.15em;
      color: #ffd700;
      text-shadow: 1px 1px 3px #000;
      margin-bottom: 6px;
    }
    .card-desc {
      font-size: 0.95em;
      text-align: justify;
      line-height: 1.3;
    }
  </style>
</head>

<body>
  <!-- Language Toggle Button -->
  <button class="lang-toggle" id="langToggleBtn">TR / EN</button>

  <div class="container">
    <h1 id="titleText">Daily Tarot</h1>
    <p class="subtitle" id="subtitleText">
      Draw your three cards once a day. Keep your streak blazing among the stars, and let each card guide you with deeper advice.
    </p>

    <div id="streakContainer"></div>

    <button class="action-btn" id="drawCardsBtn">Draw 3 Cards</button>
    <div id="message"></div>

    <div class="three-cards" id="threeCardsContainer"></div>
  </div>

  <script>
    /************************************************************
     *             BILINGUAL UI TEXTS (EN / TR)                 *
     ************************************************************/
    const uiTexts = {
      en: {
        title: "Daily Tarot",
        subtitle: "Draw your three cards once a day. Keep your streak blazing among the stars, and let each card guide you with deeper advice.",
        drawButton: "Draw 3 Cards",
        alreadyDrewMsg: "You have already drawn today's tarot. Let the day pass and come back tomorrow!",
        synergyFallback: "", /* Not used, no combos. */
        streakLabel: "Streak",
        positionPast: "Past",
        positionPresent: "Present",
        positionFuture: "Future"
      },
      tr: {
        title: "Günlük Tarot",
        subtitle: "Günde bir kez üç kart seçin. Yıldızlar arasında serinizi sürdürün ve her kartın derin önerileriyle yolunuzu bulun.",
        drawButton: "3 Kart Çek",
        alreadyDrewMsg: "Bugünün tarotunu zaten çektiniz. Günün geçmesini bekleyip yarın tekrar gelin!",
        synergyFallback: "",
        streakLabel: "Seri",
        positionPast: "Geçmiş",
        positionPresent: "Şimdi",
        positionFuture: "Gelecek"
      }
    };

    let currentLang = "en"; // varsayılan dil (İngilizce)

    /************************************************************
     *         HELPER: DİL DEĞİŞTİRME (UI METİNLERİ)            *
     ************************************************************/
    const langToggleBtn = document.getElementById("langToggleBtn");
    const titleText = document.getElementById("titleText");
    const subtitleText = document.getElementById("subtitleText");
    const drawCardsBtn = document.getElementById("drawCardsBtn");
    const messageDiv = document.getElementById("message");
    const streakContainer = document.getElementById("streakContainer");

    function applyLanguage() {
      const t = uiTexts[currentLang];
      titleText.textContent = t.title;
      subtitleText.textContent = t.subtitle;
      drawCardsBtn.textContent = t.drawButton;
      if (lastDrawDate === formatDate()) {
        messageDiv.textContent = t.alreadyDrewMsg;
      }
      updateStreakDisplay(); 
    }

    function toggleLanguage() {
      currentLang = (currentLang === "en") ? "tr" : "en";
      applyLanguage();
    }
    langToggleBtn.addEventListener("click", toggleLanguage);

    /************************************************************
     *          TAROT DESTE (78 KART) -> 24 KART LOKAL          *
     *  Kalanları kısmen Wikimedia linki, hepsi ikidilli.       *
     *  Her kart: upright: { en: "...", tr: "..." }, reversed: ...
     ************************************************************/
    const tarotDeck = [
      // Örnek: Sizin 24 kart - images/xxx.jpg
      {
        name: "Two of Wands",
        image: "images/twoofwands.jpg",
        upright: {
          en: "You stand at a threshold, planning your future steps. Take bold action after careful thought; the world awaits your initiative.",
          tr: "Bir eşikte duruyorsunuz, gelecek adımlarınızı planlıyorsunuz. Dikkatli düşünüp cesur hareket edin; dünya atılımınızı bekliyor."
        },
        reversed: {
          en: "Indecision and overthinking might stall your progress. Balance your fears with realistic goals, and move forward with caution.",
          tr: "Karar verememe ve fazla düşünme ilerlemenizi durdurabilir. Korkularınızı gerçekçi hedeflerle dengeleyip, dikkatle ilerleyin."
        }
      },
      {
        name: "Ace of Cups",
        image: "images/aceofcups.jpg",
        upright: {
          en: "A wellspring of emotion or creativity is opening for you. Embrace heartfelt connections and let compassion flow.",
          tr: "Duygusal veya yaratıcı bir kaynak sizin için açılıyor. İçten bağları kucaklayın ve şefkati akışına bırakın."
        },
        reversed: {
          en: "Unspoken feelings or emotional blockage hinder deeper intimacy. Healing old wounds may unlock genuine affection.",
          tr: "Dile getirilmemiş duygular veya duygusal tıkanıklık, derin yakınlaşmayı engelliyor. Eski yaraları iyileştirmek gerçek sevgiye kapı açabilir."
        }
      },
      {
        name: "The Chariot",
        image: "images/thechariot.jpg",
        upright: {
          en: "Your determination and self-control fuel your journey to success. Harness opposing forces and direct them with confidence.",
          tr: "Kararlılığınız ve özdenetiminiz başarı yolculuğunuzu besliyor. Zıt güçleri kontrol edin ve güvenle yönlendirin."
        },
        reversed: {
          en: "Scattered energy or internal conflict halts your progress. Regain your focus and align your will before proceeding.",
          tr: "Dağınık enerji veya içsel çatışma ilerlemenizi durduruyor. Devam etmeden önce odağınızı ve iradenizi yeniden toplayın."
        }
      },
      {
        name: "Queen of Swords",
        image: "images/queenofswords.jpg",
        upright: {
          en: "You offer clear logic and unbiased perspective. Communicate truth gently, but stand firm in your convictions.",
          tr: "Tarafsız bir bakış ve net mantık sunuyorsunuz. Gerçeği nazikçe aktarın ancak inançlarınızdan ödün vermeyin."
        },
        reversed: {
          en: "Coldness or harsh criticism may push people away. Balance honesty with empathy to maintain meaningful bonds.",
          tr: "Soğuk veya sert eleştiriler insanları uzaklaştırabilir. Dürüstlüğü şefkatle dengeleyerek anlamlı bağları koruyun."
        }
      },
      {
        name: "Knight of Pentacles",
        image: "images/knightofpentacles.jpg",
        upright: {
          en: "Steady diligence and commitment define your path. Through hard work and patient methods, you’ll build lasting security.",
          tr: "İstikrarlı özen ve bağlılık yolunuzu belirler. Sıkı çalışma ve sabırlı yöntemlerle kalıcı güvenlik oluşturacaksınız."
        },
        reversed: {
          en: "Rigidity or stagnation could undermine your efforts. Adapt to new methods or risk standing still indefinitely.",
          tr: "Katılık veya durgunluk çabalarınızı zayıflatabilir. Yeni yöntemlere uyum sağlayın veya süresiz olarak yerinizde sayma riskiyle karşılaşın."
        }
      },
      {
        name: "The High Priestess",
        image: "images/thehighpriestess.jpg",
        upright: {
          en: "Listen to your inner voice and observe subtle signs. Wisdom lies beyond surface appearances.",
          tr: "İç sesinize kulak verin ve ince işaretleri gözlemleyin. Bilgelik yüzeyin ötesinde gizlidir."
        },
        reversed: {
          en: "Secrets or self-doubt cloud your judgment. Confront hidden truths to restore clarity.",
          tr: "Gizli sırlar veya kendinden şüphe yargınızı karartıyor. Netliği geri kazanmak için saklı gerçeklerle yüzleşin."
        }
      },
      {
        name: "King of Wands",
        image: "images/kingofwands.jpg",
        upright: {
          en: "You lead with passion and vision. Inspire others with your bold ideas, but keep your temper in check.",
          tr: "Tutku ve vizyonla liderlik ediyorsunuz. Cesur fikirlerinizle başkalarını harekete geçirin, öfkenizi ise dizginleyin."
        },
        reversed: {
          en: "Impulsiveness or arrogance might sabotage your goals. Temper your fiery energy with thoughtful planning.",
          tr: "Fevrilik veya kibir hedeflerinizi baltalayabilir. Ateşli enerjinizi düşünceli bir planlamayla dengeleyin."
        }
      },
      {
        name: "Seven of Pentacles",
        image: "images/sevenofpentacles.jpg",
        upright: {
          en: "Hard work is taking root, though results may be slow. Continue nurturing your efforts for a solid harvest.",
          tr: "Sıkı çalışmalarınız kök salıyor ancak sonuçlar yavaş gelebilir. Emeklerinizi beslemeye devam edin; sağlam bir hasat elde edeceksiniz."
        },
        reversed: {
          en: "Growing impatience or doubt can derail progress. Reassess your methods and stay consistent for true rewards.",
          tr: "Artan sabırsızlık veya şüphe ilerlemeyi raydan çıkarabilir. Yöntemlerinizi gözden geçirin ve gerçek kazanç için istikrarlı kalın."
        }
      },
      {
        name: "Knight of Wands",
        image: "images/knightofwands.jpg",
        upright: {
          en: "Your adventurous spirit ignites new possibilities. Embrace bold moves, but prepare for rapid shifts.",
          tr: "Maceracı ruhunuz yeni ihtimalleri alevlendiriyor. Cesur adımları kucaklayın, ancak ani değişimlere de hazırlıklı olun."
        },
        reversed: {
          en: "Reckless haste can lead to chaos. Slow down slightly to harness your passion constructively.",
          tr: "Düşüncesiz acelecilik kaosa neden olabilir. Tutkunuzu yapıcı şekilde kullanmak için biraz yavaşlayın."
        }
      },
      {
        name: "Six of Pentacles",
        image: "images/sixofpentacles.jpg",
        upright: {
          en: "Give and receive in balanced measure. Mutual support fosters trust and well-being.",
          tr: "Alıp vermeyi dengede tutun. Karşılıklı destek, güven ve esenliğe zemin hazırlar."
        },
        reversed: {
          en: "One-sided generosity or hidden motives disrupt harmony. Reevaluate the fairness in each exchange.",
          tr: "Tek taraflı cömertlik veya gizli niyetler uyumu bozar. Her alışverişin adaletini yeniden değerlendirin."
        }
      },
      {
        name: "King of Cups",
        image: "images/kingofcups.jpg",
        upright: {
          en: "Emotional mastery and compassion guide you. Offer a calm harbor for those facing turbulent feelings.",
          tr: "Duygusal ustalık ve şefkat size rehberlik ediyor. Fırtınalı duygular yaşayanlara sakin bir liman sunun."
        },
        reversed: {
          en: "Suppressed emotions or manipulative behavior lurk beneath the surface. Seek honest connections for true harmony.",
          tr: "Bastırılmış duygular veya manipülatif davranışlar derinde saklı olabilir. Gerçek uyum için dürüst bağlar arayın."
        }
      },
      {
        name: "Eight of Pentacles",
        image: "images/eightofpentacles.jpg",
        upright: {
          en: "Skill-building, meticulous work, and dedication yield results. Perfect your craft through patience.",
          tr: "Beceri geliştirme, titiz çalışma ve adanmışlık sonuç getirir. Sabırla işinizde ustalaşın."
        },
        reversed: {
          en: "Cut corners or half-hearted effort lead to subpar outcomes. Commit fully or risk diminishing returns.",
          tr: "Kolaycılık veya gönülsüz çaba vasat sonuçlar doğurur. Kendinizi tamamen verin ya da azalan getirileri göze alın."
        }
      },
      {
        name: "Nine of Pentacles",
        image: "images/nineofpentacles.jpg",
        upright: {
          en: "Self-reliance and material comfort come from your past dedication. Enjoy this moment of ease.",
          tr: "Özverili çabanız, kendi kendinize yetebilme ve maddi rahatlık getiriyor. Bu sakin anın tadını çıkarın."
        },
        reversed: {
          en: "Overindulgence or shallow comfort might breed emptiness. Seek inner fulfillment, not just luxury.",
          tr: "Aşırı tüketim veya yüzeysel rahatlık boşluk yaratabilir. Sadece lükse değil, içsel tatmine de yönelin."
        }
      },
      {
        name: "Five of Cups",
        image: "images/fiveofcups.jpg",
        upright: {
          en: "Painful disappointments weigh on your heart. Grieve what’s lost, yet acknowledge hidden blessings nearby.",
          tr: "Acı veren hayal kırıklıkları kalbinize yük oluyor. Kaybettiklerinize yas tutun ama yakındaki gizli nimetleri de fark edin."
        },
        reversed: {
          en: "A slow return to hope after sorrow. Embrace healing and allow optimism a place in your life again.",
          tr: "Üzüntüden sonra yavaşça umuda dönüş. İyileşmeyi kucaklayın ve iyimserliğe yeniden hayatınızda yer açın."
        }
      },
      {
        name: "Eight of Swords",
        image: "images/eightofswords.jpg",
        upright: {
          en: "You may feel trapped by limitations, but your mind holds the greatest key. Recognize fear’s illusions.",
          tr: "Sınırlamalarla kapana kısılmış hissedebilirsiniz; ancak en güçlü anahtar zihninizde. Korkunun illüzyonlarını fark edin."
        },
        reversed: {
          en: "Freedom dawns as you see beyond mental blocks. Face each worry to find a clearer path forward.",
          tr: "Zihinsel engellerin ötesini gördükçe özgürlük doğuyor. Her endişeyle yüzleşin, daha net bir yol bulacaksınız."
        }
      },
      {
        name: "Queen of Pentacles",
        image: "images/queenofpentacles.jpg",
        upright: {
          en: "Supportive, practical, and caring, you nurture growth in all around you. Mind both home and finances with ease.",
          tr: "Destekleyici, pratik ve şefkatli biri olarak çevrenizdeki herkesi büyütüyorsunuz. Hem evi hem de finansı kolaylıkla idare edin."
        },
        reversed: {
          en: "Neglect of emotional warmth or an over-focus on material gain can strain relationships. Seek balance and empathy.",
          tr: "Duygusal sıcaklığı ihmal etmek veya maddiyata aşırı odaklanmak ilişkileri gerer. Denge ve empati arayın."
        }
      },
      {
        name: "The Emperor",
        image: "images/theemperor.jpg",
        upright: {
          en: "You embody authority, order, and structure. By leading calmly, you build a stable foundation for all.",
          tr: "Otorite, düzen ve yapıyı temsil ediyorsunuz. Sakin liderlikle herkes için sağlam bir temel inşa edersiniz."
        },
        reversed: {
          en: "Tyranny or loss of control can unravel progress. Temper discipline with understanding for true respect.",
          tr: "Zorbalık veya kontrol kaybı ilerlemeyi çökertir. Disiplini anlayışla harmanlayarak gerçek saygı kazanın."
        }
      },
      {
        name: "The Empress",
        image: "images/theempress.jpg",
        upright: {
          en: "Creative abundance and maternal energy flow. Cultivate ideas and relationships in a warm, nurturing space.",
          tr: "Yaratıcı bolluk ve anaç enerji akıyor. Fikirleri ve ilişkileri sıcak, besleyici bir ortamda büyütün."
        },
        reversed: {
          en: "Smothering or creative blocks hinder growth. Relax your hold and let nature take its course.",
          tr: "Bunaltıcı tutum veya yaratıcı tıkanmalar gelişimi engelliyor. Kontrolü biraz gevşetin ve doğallığa izin verin."
        }
      },
      {
        name: "Ace of Wands",
        image: "images/aceofwands.jpg",
        upright: {
          en: "A burst of passion and motivation surges. Channel this energy into bold new ventures without delay.",
          tr: "Tutku ve motivasyon patlaması yaşıyorsunuz. Bu enerjiyi cesur yeni girişimlere vakit kaybetmeden yöneltin."
        },
        reversed: {
          en: "Lack of direction or sudden discouragement blocks your spark. Seek fresh inspiration to reignite the flame.",
          tr: "Yön eksikliği veya ani heves kırılması kıvılcımınızı söndürüyor. Alevi yeniden yakmak için taze ilham arayın."
        }
      },
      {
        name: "Three of Pentacles",
        image: "images/threeofpentacles.jpg",
        upright: {
          en: "Collaboration, shared expertise, and respect build a solid project. Recognize each person’s unique skill.",
          tr: "İşbirliği, ortak uzmanlık ve saygı sağlam bir proje kurar. Her kişinin benzersiz becerisini tanıyın."
        },
        reversed: {
          en: "Miscommunication or ego battles disrupt teamwork. Encourage openness and humility for true success.",
          tr: "Yanlış iletişim veya ego çatışmaları ekip çalışmasını bozar. Gerçek başarı için açıklığı ve alçakgönüllülüğü teşvik edin."
        }
      },
      {
        name: "Eight of Wands",
        image: "images/eightofwands.jpg",
        upright: {
          en: "Rapid developments or swift communication bring excitement. Stay focused to keep control of the pace.",
          tr: "Hızlı gelişmeler veya ani iletişim heyecan yaratır. Hızı kontrol etmek için dikkatinizi koruyun."
        },
        reversed: {
          en: "Delays, confusion, or misdirected energy stall progress. Slow down and clarify to avoid chaos.",
          tr: "Gecikmeler, karışıklık veya yanlış yönlendirilmiş enerji ilerlemeyi durduruyor. Kaosu önlemek için yavaşlayın ve netleştirin."
        }
      },
      {
        name: "Page of Swords",
        image: "images/pageofswords.jpg",
        upright: {
          en: "Curiosity drives you to seek truths, but be tactful in sharing them. Observation is your ally.",
          tr: "Merak sizi gerçekleri aramaya itiyor, ancak bunları paylaşırken nazik olun. Gözlem sizin dostunuzdur."
        },
        reversed: {
          en: "Overly blunt or snooping behavior creates conflict. Balance your thirst for info with respect for privacy.",
          tr: "Fazla sert veya meraklı davranışlar çatışma yaratır. Bilgi isteğinizi mahremiyete saygıyla dengeleyin."
        }
      },
      {
        name: "Page of Wands",
        image: "images/pageofwands.jpg",
        upright: {
          en: "Bursting enthusiasm leads you to explore fresh horizons. Let optimism guide each step.",
          tr: "Coşkulu heyecan sizi yeni ufukları keşfetmeye yöneltiyor. Her adımda iyimserliğe güvenin."
        },
        reversed: {
          en: "Restless or unfocused impulses hinder progress. Ground your passion in concrete plans to move forward.",
          tr: "Huzursuz veya odaklanamayan dürtüler ilerlemeyi aksatıyor. Tutkunuzu somut planlarla temellendirerek ilerleyin."
        }
      },
      {
        name: "Queen of Wands",
        image: "images/queenofwands.jpg",
        upright: {
          en: "Radiant confidence and magnetic charm. Share your creative spark, and watch others draw inspiration.",
          tr: "Işıl ışıl özgüven ve mıknatıs gibi bir çekicilik. Yaratıcı kıvılcımınızı paylaşın ve başkalarının ilham alışını izleyin."
        },
        reversed: {
          en: "Dominant or attention-seeking behaviors can stifle cooperation. Let others shine alongside you.",
          tr: "Baskın veya ilgi isteyen davranışlar işbirliğini gölgeleyebilir. Başkalarının da sizinle parlamasına izin verin."
        }
      },

      // Geri kalan 54 kart: Wikimedia + 2-dilli upright/reversed
      {
        name: "3 - The Empress", // ÖRNEK
        image: "https://upload.wikimedia.org/wikipedia/commons/b/b9/RWS_Tarot_03_Empress.jpg",
        upright: {
          en: "Abundance, creativity, and nurturing love. A time to grow and bloom in all endeavors.",
          tr: "Bolluk, yaratıcılık ve şefkatli sevgi. Tüm girişimlerde büyüyüp çiçek açma zamanı."
        },
        reversed: {
          en: "Blocked growth or smothering influences may hinder progress. Loosen control for natural expansion.",
          tr: "Engellenmiş büyüme veya bunaltıcı etkiler ilerlemeyi durdurabilir. Doğal gelişim için kontrolü hafifletin."
        }
      },
      // ...
      // 53 diğer kart da benzer şekilde (burada kısaltıyoruz).
    ];

    /************************************************************
     *            DAİLY DRAW + STREAK (LOCALSTORAGE)            *
     *            (NO COMBO SYSTEM, JUST 3 CARDS)               *
     ************************************************************/
    // localStorage keys
    let lastDrawDate = localStorage.getItem("dailyTarotLastDraw") || null;
    let streakCount = parseInt(localStorage.getItem("dailyTarotStreak") || "0");

    const drawButton = document.getElementById("drawCardsBtn");
    const threeCardsContainer = document.getElementById("threeCardsContainer");

    function formatDate(d = new Date()) {
      const day = String(d.getDate()).padStart(2,"0");
      const mon = String(d.getMonth()+1).padStart(2,"0");
      const yr = d.getFullYear();
      return `${day}.${mon}.${yr}`;
    }

    function updateStreakDisplay() {
      const t = uiTexts[currentLang];
      const label = t.streakLabel; // "Streak" or "Seri"
      streakContainer.textContent = `${label}: ${streakCount} 🔥`;
    }

    // streak check on load
    (function checkStreakOnLoad() {
      if(!lastDrawDate) {
        streakCount = 0;
        localStorage.setItem("dailyTarotStreak","0");
      } else {
        const todayStr = formatDate();
        if(lastDrawDate !== todayStr) {
          // check gap
          const [dd, mm, yy] = lastDrawDate.split(".").map(Number);
          const lastDateObj = new Date(yy, mm-1, dd);
          const now = new Date();
          const diffTime = now - lastDateObj;
          const diffDays = Math.floor(diffTime / (1000*60*60*24));
          if(diffDays > 1) {
            // missed day(s)
            streakCount = 0;
            localStorage.setItem("dailyTarotStreak","0");
          }
        }
      }
      applyLanguage(); // ilk dil ayarlarını uygula
    })();

    drawButton.addEventListener("click", () => {
      const t = uiTexts[currentLang];
      messageDiv.textContent = "";
      threeCardsContainer.innerHTML = "";

      const todayStr = formatDate();
      if(lastDrawDate === todayStr) {
        // same day draw blocked
        messageDiv.textContent = t.alreadyDrewMsg;
        return;
      }

      // proceed with draw
      const idxSet = new Set();
      while(idxSet.size < 3) {
        idxSet.add(Math.floor(Math.random()*tarotDeck.length));
      }
      const chosenIdxs = [...idxSet].sort((a,b)=>a-b);

      const posLabels = [t.positionPast, t.positionPresent, t.positionFuture];

      chosenIdxs.forEach((deckIndex, i) => {
        const cardObj = tarotDeck[deckIndex];
        const isRev = Math.random()<0.5;
        
        const cardDiv = document.createElement("div");
        cardDiv.className = "card-container";

        const label = document.createElement("h4");
        label.className = "position-label";
        label.textContent = posLabels[i];
        cardDiv.appendChild(label);

        // image
        const imgEl = document.createElement("img");
        imgEl.src = cardObj.image;
        if(isRev) {
          imgEl.style.transform = "rotate(180deg)";
        }
        cardDiv.appendChild(imgEl);

        // title
        const titleEl = document.createElement("h5");
        titleEl.className = "card-title";
        titleEl.textContent = cardObj.name + (isRev ? " (Reversed)" : "");
        cardDiv.appendChild(titleEl);

        // desc
        const descEl = document.createElement("p");
        descEl.className = "card-desc";
        // choose language upright/reversed
        descEl.textContent = isRev
          ? cardObj.reversed[currentLang]
          : cardObj.upright[currentLang];
        cardDiv.appendChild(descEl);

        threeCardsContainer.appendChild(cardDiv);
      });

      // mark daily usage
      lastDrawDate = todayStr;
      localStorage.setItem("dailyTarotLastDraw", lastDrawDate);

      // streak
      if(streakCount <= 0) {
        streakCount = 1;
      } else {
        streakCount++;
      }
      localStorage.setItem("dailyTarotStreak", streakCount.toString());
      updateStreakDisplay();
    });
  </script>
</body>
</html>
